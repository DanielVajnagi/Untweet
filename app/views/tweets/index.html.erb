<div class="tweets-page-container">
  <% if user_signed_in? %>
    <%= render 'tweets/tweet_form' %>
  <% else %>
    <%= render 'tweets/non_authorized_message' %>
  <% end %>

  <h2 class="tweet-header"><%= t('tweets.recent_tweets') %></h2>

  <div data-controller="infinite-scroll"
       data-infinite-scroll-last-created-at-value="<%= @tweets.last&.created_at&.iso8601 %>"
       data-infinite-scroll-loading-message-value="<%= t('tweets.loading_more') %>"
       data-infinite-scroll-no-more-tweets-message-value="<%= t('tweets.no_more_tweets') %>"
       data-infinite-scroll-error-message-value="<%= t('tweets.error_loading') %>">
    <ul id="tweet_list" class="tweet-list">
      <%= render partial: 'tweets/tweet', collection: @tweets, as: :tweet %>
    </ul>

    <div data-infinite-scroll-target="container"></div>
  </div>
</div>

